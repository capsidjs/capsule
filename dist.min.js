let e;const t={};function n(e,t){if(!e)throw new Error(t)}function s(s){n("string"==typeof s&&!!s,"Component name must be a non-empty string");const i=`${s}-ðŸ’Š`,a=[({el:e})=>{e.classList.add(s),e.classList.add(i)}],u=e=>{if(!e.classList.contains(i)){const t=new CustomEvent("__mount__",{bubbles:!1}),n=o(t,e);a.forEach((e=>{e(n)})),e.dispatchEvent(t)}};u.sel=`.${s}:not(.${i})`,t[s]=u,(e=e||new Promise((e=>{const t=document,n=()=>{"complete"===t.readyState&&(e(),t.removeEventListener("readystatechange",n))};t.addEventListener("readystatechange",n),n()}))).then((()=>{c(s)}));const l=new Proxy({},{set:(e,t,s)=>(n("function"==typeof s,`Event handler must be a function, ${typeof s} (${s}) is given`),a.push(r(t,s)),!0),get:(e,t)=>new Proxy({},{set:(e,s,o)=>(n("function"==typeof o,`Event handler must be a function, ${typeof o} (${o}) is given`),a.push(r(t,o,s)),!0)})}),m=e=>{a.push((({el:t})=>{t.classList.add(e)}))};return{on:l,is:m,sub:e=>m(`sub:${e}`),innerHTML:e=>{a.push((({el:t})=>{t.innerHTML=e}))}}}function o(e,t){return{e:e,el:t,query:e=>t.querySelector(e),pub:(e,t,n)=>{const s=n??`.sub\\:${e}`;document.querySelectorAll(s).forEach((n=>{n.dispatchEvent(new CustomEvent(e,{bubbles:!1,detail:t}))}))},emit:(e,n)=>{t.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:n}))}}}function r(e,t,n){return({el:s})=>{const r=e=>{n&&![].some.call(s.querySelectorAll(n),(t=>t===e.target||t.contains(e.target)))||t(o(e,s))};r.remove=()=>{s.removeEventListener(e,r)},s.addEventListener(e,r)}}function c(e,s){let o;e?(!function(e){n("string"==typeof e,"The name should be a string"),n(!!t[e],`The component of the given name is not registered: ${e}`)}(e),o=[e]):o=Object.keys(t),o.map((e=>{[].map.call((s||document).querySelectorAll(t[e].sel),t[e])}))}globalThis.capsule={component:s,prep:c};export{s as component};export{c as prep};