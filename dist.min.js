let e;const t={};function n(e,t){if(!e)throw new Error(t)}function s(s){n("string"==typeof s&&!!s,"Component name must be a non-empty string");const a=`${s}-ðŸ’Š`,c=[({el:e})=>{e.classList.add(s),e.classList.add(a)}],i=[],l=e=>{if(!e.classList.contains(a)){const t=o(new CustomEvent("__mount__",{bubbles:!1}),e);c.forEach((e=>{e(t)}))}};l.sel=`.${s}:not(.${a})`,t[s]=l,(e=e||new Promise((e=>{const t=document,n=()=>{"complete"===t.readyState&&(e(),t.removeEventListener("readystatechange",n))};t.addEventListener("readystatechange",n),n()}))).then((()=>{u(s)}));const m=new Proxy({},{set:(e,t,n)=>r(c,i,t,n),get:(e,t)=>new Proxy({},{set:(e,n,s)=>r(c,i,t,s,n)})}),p=e=>{c.push((({el:t})=>{t.classList.add(e)}))};return{on:m,is:p,sub:e=>p(`sub:${e}`),innerHTML:e=>{c.push((({el:t})=>{t.innerHTML=e}))}}}function o(e,t){return{e:e,el:t,query:e=>t.querySelector(e),pub:(e,t)=>{document.querySelectorAll(`.sub\\:${e}`).forEach((n=>{n.dispatchEvent(new CustomEvent(e,{bubbles:!1,detail:t}))}))},emit:(e,n)=>{t.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:n}))}}}function r(e,t,s,r,u){return n("function"==typeof r,`Event handler must be a function, ${typeof r} (${r}) is given`),"__mount__"===s?(e.push(r),!0):"__unmount__"===s?(t.push(r),!0):(e.push((({el:e})=>{const n=t=>{u&&![].some.call(e.querySelectorAll(u),(e=>e===t.target||e.contains(t.target)))||r(o(t,e))};t.push((()=>{e.removeEventListener(s,n)})),e.addEventListener(s,n)})),!0)}function u(e,s){let o;e?(!function(e){n("string"==typeof e,"The name should be a string"),n(!!t[e],`The component of the given name is not registered: ${e}`)}(e),o=[e]):o=Object.keys(t),o.map((e=>{[].map.call((s||document).querySelectorAll(t[e].sel),t[e])}))}globalThis.capsule={component:s,prep:u};export{s as component};export{u as prep};